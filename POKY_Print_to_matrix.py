data = """peak @ 121.851 5.935 lw 9.563 18.105 vol 5.104e+09 rms 8.5%
Isolated
peak @ 110.036 8.487 lw 10.006 17.878 vol 5.790e+09 rms 7.9%
Isolated
peak @ 109.645 8.963 lw 10.234 17.528 vol 3.585e+09 rms 8.0%
Isolated
peak @ 108.668 8.293 lw 9.628 16.019 vol 5.523e+09 rms 5.4%
Isolated
peak @ 108.446 8.105 lw 9.718 17.426 vol 6.035e+09 rms 18.5%
Isolated
peak @ 107.823 7.693 lw 10.197 17.868 vol 4.401e+09 rms 9.1%
Isolated
peak @ 106.297 7.580 lw 12.085 20.373 vol 2.705e+09 rms 9.0%
Isolated
peak @ 104.855 8.364 lw 10.058 18.542 vol 4.478e+09 rms 6.2%
Isolated
peak @ 124.735 10.402 lw 11.535 19.020 vol 1.827e+09 rms 13.8%
Isolated
peak @ 122.805 10.538 lw 9.664 16.062 vol 4.038e+09 rms 10.3%
Isolated
peak @ 125.511 9.468 lw 9.884 19.034 vol 5.088e+09 rms 6.4%
Isolated
peak @ 124.750 9.518 lw 9.942 21.892 vol 3.850e+09 rms 8.0%
Isolated
peak @ 127.672 9.152 lw 10.985 16.886 vol 2.767e+09 rms 11.9%
Isolated
peak @ 127.426 9.000 lw 10.165 16.722 vol 4.261e+09 rms 9.9%
Isolated
peak @ 126.159 8.702 lw 10.680 18.499 vol 3.292e+09 rms 10.8%
Isolated
peak @ 125.497 9.043 lw 9.576 19.582 vol 5.136e+09 rms 10.7%
Isolated
peak @ 124.660 8.829 lw 9.652 16.259 vol 5.098e+09 rms 5.9%
Isolated
peak @ 124.139 7.330 lw 9.817 21.197 vol 5.076e+09 rms 7.4%
Isolated
peak @ 122.923 7.461 lw 9.557 14.696 vol 7.357e+09 rms 15.1%
Isolated
peak @ 121.751 9.392 lw 12.819 22.343 vol 1.147e+09 rms 5.6%
Isolated
peak @ 121.524 9.223 lw 9.579 15.304 vol 5.985e+09 rms 26.8%
Isolated
peak @ 118.790 9.116 lw 9.612 19.011 vol 5.053e+09 rms 13.4%
Fit group of 2 peaks.
peak @ 118.344 9.084 lw 9.158 13.698 vol 3.516e+09 rms 33.5%
peak @ 118.255 9.058 lw 9.410 17.020 vol 5.554e+09 rms 21.2%
Isolated
peak @ 125.904 8.407 lw 11.329 19.711 vol 5.408e+09 rms 9.9%
Isolated
peak @ 124.834 8.342 lw 12.625 19.611 vol 3.653e+09 rms 8.6%
Isolated
peak @ 124.179 8.224 lw 10.099 15.371 vol 5.222e+09 rms 14.2%
Isolated
peak @ 122.995 7.940 lw 10.955 13.877 vol 5.269e+09 rms 10.4%
Isolated
peak @ 121.752 7.871 lw 10.999 14.345 vol 5.962e+09 rms 11.3%
Isolated
peak @ 121.783 7.602 lw 10.838 14.719 vol 6.097e+09 rms 19.6%
Isolated
peak @ 120.564 7.665 lw 14.899 16.324 vol 5.883e+09 rms 10.7%
Fit group of 4 peaks.
peak @ 120.098 7.638 lw 14.962 32.515 vol 7.649e+09 rms 57.3%
peak @ 119.684 7.650 lw 17.107 50.367 vol 3.604e+09 rms 121.7%
peak @ 119.706 7.661 lw 13.446 14.823 vol 4.584e+09 rms 95.7%
peak @ 120.059 7.649 lw 9.041 12.879 vol 7.952e+09 rms 55.2%
Isolated
peak @ 119.425 7.394 lw 10.239 15.441 vol 6.904e+09 rms 13.9%
Isolated
peak @ 120.606 7.425 lw 12.048 15.768 vol 3.908e+09 rms 13.4%
Isolated
peak @ 116.947 7.469 lw 11.472 19.840 vol 5.514e+09 rms 13.8%
Isolated
peak @ 116.209 7.406 lw 11.522 17.635 vol 7.594e+09 rms 10.7%
Isolated
peak @ 115.583 7.444 lw 11.646 16.241 vol 6.642e+09 rms 11.9%
Isolated
peak @ 113.751 7.033 lw 10.476 19.076 vol 5.388e+09 rms 9.9%
Isolated
peak @ 109.960 6.732 lw 10.306 17.969 vol 5.569e+09 rms 6.4%
Isolated
peak @ 111.146 7.204 lw 11.541 19.212 vol 5.714e+09 rms 10.9%
Isolated
peak @ 110.606 7.381 lw 10.153 16.911 vol 5.109e+09 rms 11.1%
Isolated
peak @ 111.011 7.924 lw 11.976 18.012 vol 5.075e+09 rms 6.4%
Isolated
peak @ 113.402 8.141 lw 10.054 17.379 vol 5.243e+09 rms 17.4%
Isolated
peak @ 113.642 8.540 lw 9.941 19.592 vol 5.227e+09 rms 10.1%
Isolated
peak @ 113.568 8.425 lw 11.820 17.156 vol 7.130e+09 rms 12.9%
Isolated
peak @ 116.640 8.328 lw 11.207 14.714 vol 5.798e+09 rms 10.9%
Isolated
peak @ 117.641 8.638 lw 9.743 14.384 vol 5.799e+09 rms 21.4%
Isolated
peak @ 118.260 8.853 lw 10.745 25.398 vol 3.174e+09 rms 13.9%
Isolated
peak @ 120.147 8.691 lw 9.532 19.269 vol 5.378e+09 rms 13.2%
Isolated
peak @ 117.959 8.190 lw 10.898 14.463 vol 6.634e+09 rms 12.9%
Isolated
peak @ 118.859 8.321 lw 12.323 15.325 vol 6.807e+09 rms 11.0%
Isolated
peak @ 115.148 7.609 lw 15.011 21.145 vol 2.494e+09 rms 4.3%
Isolated
peak @ 116.608 7.761 lw 10.859 16.070 vol 4.972e+09 rms 13.2%
Isolated
peak @ 117.280 7.868 lw 14.045 15.576 vol 5.724e+09 rms 8.0%
Fit group of 4 peaks.
peak @ 119.020 7.836 lw 15.799 15.681 vol 3.593e+09 rms 93.3%
peak @ 118.504 7.825 lw 14.312 23.745 vol 3.597e+09 rms 93.2%
peak @ 118.866 7.861 lw 14.317 14.050 vol 6.258e+09 rms 53.5%
peak @ 118.547 7.885 lw 14.544 18.656 vol 6.847e+09 rms 48.9%
Fit group of 4 peaks.
peak @ 121.312 7.831 lw 10.946 15.719 vol 5.927e+09 rms 48.2%
peak @ 121.118 7.986 lw 10.586 15.897 vol 3.779e+09 rms 75.6%
peak @ 121.125 7.911 lw 10.342 21.127 vol 5.833e+09 rms 49.0%
peak @ 121.086 7.898 lw 10.221 19.963 vol 5.911e+09 rms 48.3%
Isolated
peak @ 120.885 8.290 lw 10.709 14.367 vol 6.718e+09 rms 15.2%
Isolated
peak @ 123.058 8.397 lw 14.540 19.231 vol 1.824e+09 rms 5.0%
Isolated
peak @ 120.228 8.200 lw 12.116 16.139 vol 6.313e+09 rms 10.2%
Isolated
peak @ 118.816 8.556 lw 9.433 14.846 vol 6.776e+09 rms 14.8%
Isolated
peak @ 118.143 7.771 lw 11.252 15.265 vol 6.391e+09 rms 10.4%
Isolated
peak @ 119.256 7.633 lw 13.712 15.313 vol 5.945e+09 rms 14.1%
Fit group of 2 peaks.
peak @ 118.392 8.024 lw 11.918 17.170 vol 2.461e+09 rms 31.4%
peak @ 118.254 7.999 lw 12.765 24.004 vol 3.370e+09 rms 22.9%
Fit group of 2 peaks.
peak @ 119.439 8.482 lw 11.040 12.714 vol 4.461e+09 rms 23.6%
peak @ 119.525 8.472 lw 12.109 15.563 vol 5.461e+09 rms 19.3%
Fit group of 2 peaks.
peak @ 123.681 8.465 lw 14.517 19.603 vol 1.325e+09 rms 13.5%
peak @ 123.611 8.432 lw 20.293 29.916 vol 1.991e+09 rms 9.0%
Isolated
peak @ 122.781 8.280 lw 13.611 19.315 vol 5.254e+09 rms 6.8%
Isolated
peak @ 117.586 8.825 lw 16.828 21.062 vol 1.109e+09 rms 5.4%
Fit group of 2 peaks.
peak @ 119.688 7.940 lw 14.956 17.990 vol 4.342e+09 rms 36.9%
peak @ 119.681 7.943 lw 9.088 10.138 vol 2.117e+09 rms 75.8%
Isolated
peak @ 114.288 8.413 lw 11.867 15.557 vol 6.980e+09 rms 14.6%
Isolated
peak @ 123.417 8.279 lw 13.159 16.367 vol 4.187e+09 rms 7.1%
Isolated
peak @ 117.721 7.870 lw 7.741 15.009 vol 6.192e+08 rms 12.2%
Isolated
peak @ 111.302 7.575 lw 16.609 17.058 vol 1.473e+09 rms 6.4%
Isolated
peak @ 115.983 7.964 lw 16.518 16.172 vol 9.432e+08 rms 2.7%
Isolated
peak @ 111.197 7.518 lw 17.970 11.048 vol 8.574e+08 rms 4.1%
Isolated
peak @ 111.161 6.965 lw 22.787 14.017 vol 8.194e+08 rms 2.5%
Isolated
peak @ 112.755 7.530 lw 41.181 13.900 vol 2.608e+09 rms 9.5%
Isolated
peak @ 114.039 7.928 lw 17.900 9.779 vol 8.253e+08 rms 5.8%
Isolated
peak @ 113.912 6.896 lw 19.310 13.530 vol 1.094e+09 rms 4.4%
Isolated
peak @ 112.041 7.498 lw 8.983 14.237 vol 9.782e+09 rms 16.3%
Isolated
peak @ 122.259 8.364 lw 11.450 15.637 vol 5.445e+09 rms 10.3%
Isolated
peak @ 118.096 7.877 lw 12.120 36.559 vol 1.923e+09 rms 5.6%
Isolated
peak @ 128.939 10.046 lw 9.497 16.723 vol 6.355e+09 rms 14.6%
Isolated
peak @ 129.717 10.076 lw 9.048 15.875 vol 7.176e+09 rms 11.9%
Isolated
peak @ 128.009 10.622 lw 9.351 19.298 vol 4.197e+09 rms 7.1%
Isolated
peak @ 112.449 7.671 lw 19.153 73.646 vol 1.553e+10 rms 42.4%
peak @ 112.449 7.671 lw 19.153 73.646 vol 1.553e+10 rms 42.4%
"""

import matplotlib.pyplot as plt


"""This function filters out the string Fit group of _ peaks."""


def clean_data(raw_str):
    clean_str = raw_str.replace("Fit group of 2 peaks.", '')
    clean_str = clean_str.replace("Fit group of 4 peaks.", '')
    return clean_str


"This function takes each peak and returns a value for each data point"


def interpret_vol(peak_data):
    index1 = peak_data.find('vol')
    index2 = peak_data.find('rms')
    vol = float(peak_data[index1 + 3:index2])
    return vol


def interpret_peaks(peak_data):
    index1a = peak_data.find('@') + 2
    index1b = peak_data.find(' ', 7, 17)
    w1 = float(peak_data[index1a: index1b])
    index2a = index1b + 1
    index2b = index2a + 6
    w2 = float(peak_data[index2a:index2b])
    return w1, w2


"""This function takes all of the data and separates it into an array of strings. You need to copy and paste the 
first set twice bug """


def separate(my_str):
    data_array = []
    len_between_ps = 0
    str_num = 0
    for char in my_str:
        if char == 'p':
            data_array.append(my_str[str_num - len_between_ps - 1:str_num])
            len_between_ps = 0
        else:
            len_between_ps = len_between_ps + 1
        str_num = str_num + 1
    del data_array[0]
    return data_array


"""This function takes n sets of data and returns an nx4 matrix of data points for all of the data to be easily 
interpreted """


def interpret_all_vol(data_str):
    vol_array = []
    clean_data_str = clean_data(data_str)
    separated_data_str = separate(clean_data_str)
    for element in separated_data_str:
        vol_array.append(interpret_vol(element))
    return vol_array


def interpret_all_peaks(dataset):
    peak1_array = []
    peak2_array = []
    clean_data_str = clean_data(dataset)
    sep_clean_data = separate(clean_data_str)
    for element in sep_clean_data:
        w1, w2 = interpret_peaks(element)
        peak1_array.append(w1)
        peak2_array.append(w2)

    return peak1_array, peak2_array


print(interpret_all_peaks(data)[1])
print(interpret_all_vol(data))

w1 = interpret_all_peaks(data)[0]
w2 = interpret_all_peaks(data)[1]
vol = interpret_all_vol(data)

plt.title('Volume vs. Chemical Shift')
plt.ylabel('Volume of the Peak')
plt.xlabel('Hydrogen Chemical Shift')
plt.scatter(w1, vol, marker='x')
plt.show()
